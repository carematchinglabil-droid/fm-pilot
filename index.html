<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlowMatch - ×˜×•×¤×¡ ×”×•×¨×™×</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary: #3d7bfd;
      --primary-light: #e0f2fe;
      --secondary: #22c1c3;
      --success: #10b981;
      --info: #3b82f6;
      --info-light: #dbeafe;
      --error: #ef4444;
      --text: #1f2937;
      --text-secondary: #6b7280;
      --surface: #f9fafb;
      --border: #e5e7eb;
      --white: #ffffff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Assistant', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 24px;
      color: var(--text);
    }
    
    .container {
      max-width: 720px;
      margin: 0 auto;
      background: white;
      border-radius: 24px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      overflow: hidden;
    }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 32px;
      text-align: center;
    }
    
    .badge {
      display: inline-block;
      background: rgba(255,255,255,0.2);
      padding: 6px 16px;
      border-radius: 999px;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 12px;
      backdrop-filter: blur(10px);
    }
    
    .header h1 {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 8px;
    }
    
    .header p {
      opacity: 0.95;
    }
    
    /* Important Notice */
    .notice {
      margin: 24px 32px;
      padding: 20px;
      background: linear-gradient(135deg, var(--info-light) 0%, #bfdbfe 100%);
      border-right: 4px solid var(--info);
      border-radius: 12px;
      animation: slideDown 0.5s;
    }
    
    .notice-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #1e3a8a;
      margin-bottom: 12px;
      font-size: 1.05rem;
    }
    
    .notice-icon {
      font-size: 1.5rem;
    }
    
    .notice-text {
      font-size: 0.95rem;
      color: #1e40af;
      line-height: 1.6;
    }
    
    /* Progress */
    .progress-container {
      padding: 20px 32px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
    }
    
    .progress-text {
      text-align: center;
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    
    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--border);
      border-radius: 999px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.3s;
      width: 0%;
    }
    
    /* Form */
    .form-content {
      padding: 32px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .section {
      margin-bottom: 32px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s;
    }
    
    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .section-title {
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }
    
    .required {
      color: var(--error);
    }
    
    .hint {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-top: 4px;
    }
    
    input[type="text"],
    input[type="tel"],
    select {
      width: 100%;
      padding: 12px 16px;
      font-size: 1rem;
      font-family: 'Assistant', sans-serif;
      border: 2px solid var(--border);
      border-radius: 12px;
      transition: all 0.2s;
    }
    
    input:focus,
    select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(61, 123, 253, 0.1);
    }
    
    select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%236b7280' stroke-width='2'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: left 16px center;
      padding-left: 40px;
    }
    
    /* Checkboxes */
    .checkbox-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }
    
    .checkbox-chip {
      position: relative;
    }
    
    .checkbox-chip input {
      position: absolute;
      opacity: 0;
    }
    
    .checkbox-chip label {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 999px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin: 0;
    }
    
    .checkbox-chip input:checked + label {
      background: var(--primary);
      border-color: var(--primary);
      color: white;
    }
    
    .checkbox-chip label:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
    }
    
    /* Radio */
    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 8px;
    }
    
    .radio-option {
      position: relative;
    }
    
    .radio-option input {
      position: absolute;
      opacity: 0;
    }
    
    .radio-option label {
      display: block;
      padding: 12px 16px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      margin: 0;
    }
    
    .radio-option input:checked + label {
      background: var(--primary);
      border-color: var(--primary);
      color: white;
    }
    
    /* Sub-specs */
    .sub-container {
      margin-top: 16px;
      padding: 16px;
      background: var(--primary-light);
      border-radius: 12px;
      border: 2px dashed var(--primary);
      display: none;
    }
    
    .sub-container.show {
      display: block;
      animation: slideDown 0.3s;
    }
    
    .sub-title {
      font-size: 0.875rem;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 8px;
    }
    
    @keyframes slideDown {
      from { opacity: 0; max-height: 0; }
      to { opacity: 1; max-height: 1000px; }
    }
    
    /* Insurance Logic */
    .insurance-container {
      margin-top: 16px;
      padding: 16px;
      background: #fef3c7;
      border-radius: 12px;
      border: 2px dashed #f59e0b;
      display: none;
    }
    
    .insurance-container.show {
      display: block;
      animation: slideDown 0.3s;
    }
    
    /* Consent Box */
    .consent-box {
      margin: 24px 0;
      padding: 20px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 12px;
    }
    
    .consent-checkbox {
      display: flex;
      align-items: start;
      gap: 12px;
      cursor: pointer;
    }
    
    .consent-checkbox input[type="checkbox"] {
      margin-top: 4px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      flex-shrink: 0;
    }
    
    .consent-text {
      font-size: 0.95rem;
      line-height: 1.6;
      color: var(--text);
    }
    
    .consent-text strong {
      font-weight: 700;
    }
    
    .consent-text ul {
      margin: 8px 0;
      padding-right: 20px;
    }
    
    .consent-text li {
      margin: 4px 0;
    }
    
    .privacy-link {
      color: var(--primary);
      text-decoration: underline;
      cursor: pointer;
    }
    
    /* Button */
    .btn {
      width: 100%;
      padding: 16px;
      font-size: 1.125rem;
      font-weight: 700;
      font-family: 'Assistant', sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 4px 12px rgba(61, 123, 253, 0.3);
    }
    
    .btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(61, 123, 253, 0.4);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    /* Loading & Success */
    .loading,
    .success {
      display: none;
      text-align: center;
      padding: 48px 32px;
    }
    
    .loading.show,
    .success.show {
      display: block;
    }
    
    .spinner {
      border: 4px solid var(--border);
      border-top-color: var(--primary);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .success-icon {
      font-size: 4rem;
      margin-bottom: 16px;
      animation: bounceIn 0.5s;
    }
    
    @keyframes bounceIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .success h2 {
      color: var(--success);
      margin-bottom: 12px;
    }
    
    .success p {
      color: var(--text-secondary);
      line-height: 1.6;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      transition: all 0.3s;
      border-left: 4px solid var(--error);
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      body { padding: 16px; }
      .header h1 { font-size: 1.5rem; }
      .form-content { padding: 24px; max-height: none; }
      .notice { margin: 16px 24px; padding: 16px; }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="badge">ğŸ¯ ×¤×™×™×œ×•×˜ - ×‘×“×™×§×ª ×”×ª×××”</div>
      <h1>××¦××• ××ª ×”××˜×¤×œ/×ª ×”××•×©×œ×/×ª</h1>
      <p>××™×œ×•×™ ×§×¦×¨ ×©×œ ×›-2 ×“×§×•×ª</p>
    </div>
    
    <!-- Important Notice -->
    <div class="notice">
      <div class="notice-title">
        <span class="notice-icon">ğŸ’¡</span>
        <span>×—×©×•×‘ ×œ×“×¢×ª</span>
      </div>
      <div class="notice-text">
        FlowMatch ×”×™× ×¤×œ×˜×¤×•×¨××ª ×”×ª×××” ×‘×œ×‘×“, ×•×œ× ×¡×¤×§×™×ª ×©×™×¨×•×ª×™ ×‘×¨×™××•×ª.
        ×”×¤×¨×˜×™× ×©×œ×›× ×™×•×¢×‘×¨×• ×œ××˜×¤×œ×™× ××ª××™××™× ×‘××–×•×¨×›×.
        ×›×œ ×”××™×“×¢ × ×©××¨ ×œ××©×š 30 ×™×•× ×‘×œ×‘×“.
      </div>
    </div>
    
    <!-- Progress -->
    <div class="progress-container">
      <div class="progress-text">×”×ª×§×“××•×ª: <span id="pct">0%</span></div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
    </div>
    
    <!-- Form -->
    <div class="form-content">
      <form id="form">
        
        <!-- ×¤×¨×˜×™ ×™×œ×“ -->
        <div class="section">
          <h3 class="section-title">
            <span>ğŸ‘¶</span>
            ×¤×¨×˜×™ ×”×™×œ×“/×”
          </h3>
          
          <div class="form-group">
            <label>×©× ×”×™×œ×“/×” (××•×¤×¦×™×•× ×œ×™)</label>
            <input type="text" id="childName" placeholder="××¤×©×¨ ×œ×”×©××™×¨ ×¨×™×§" />
          </div>
          
          <div class="form-group">
            <label><span class="required">*</span> ×’×™×œ</label>
            <select id="age" required>
              <option value="">×‘×—×¨/×™ ×’×™×œ</option>
              <option value="0-3">0-3</option>
              <option value="3-6">3-6</option>
              <option value="6-9">6-9</option>
              <option value="9-12">9-12</option>
              <option value="12-16">12-16</option>
              <option value="16+">16+</option>
            </select>
          </div>
          
          <div class="form-group">
            <label><span class="required">*</span> ××–×•×¨ ××’×•×¨×™×</label>
            <select id="region" required>
              <option value="">×‘×—×¨/×™ ××–×•×¨</option>
              <option value="××¨×›×–">××¨×›×–</option>
              <option value="×©×¨×•×Ÿ">×©×¨×•×Ÿ</option>
              <option value="×©×¤×œ×”">×©×¤×œ×”</option>
              <option value="×™×¨×•×©×œ×™× ×•×”×¡×‘×™×‘×”">×™×¨×•×©×œ×™× ×•×”×¡×‘×™×‘×”</option>
              <option value="×¦×¤×•×Ÿ">×¦×¤×•×Ÿ</option>
              <option value="×“×¨×•×">×“×¨×•×</option>
              <option value="× ×’×‘">× ×’×‘</option>
              <option value="××–×•×¨ ×—×™×¤×”">××–×•×¨ ×—×™×¤×”</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>×©×¤×” ××•×¢×“×¤×ª</label>
            <select id="language">
              <option value="">×œ× ××©× ×”</option>
              <option value="×¢×‘×¨×™×ª">×¢×‘×¨×™×ª</option>
              <option value="×× ×’×œ×™×ª">×× ×’×œ×™×ª</option>
              <option value="×¢×¨×‘×™×ª">×¢×¨×‘×™×ª</option>
              <option value="×¨×•×¡×™×ª">×¨×•×¡×™×ª</option>
            </select>
          </div>
        </div>
        
        <!-- ××™×§×•× ×”×˜×™×¤×•×œ -->
        <div class="section">
          <h3 class="section-title">
            <span>ğŸ’¼</span>
            ××™×§×•× ×”×˜×™×¤×•×œ
          </h3>
          
          <div class="form-group">
            <label><span class="required">*</span> ××§×¦×•×¢</label>
            <select id="therapy" required>
              <option value="">×‘×—×¨/×™ ××§×¦×•×¢</option>
              <option value="×§×œ×™× ××•×ª ×ª×§×©×•×¨×ª">×§×œ×™× ××•×ª ×ª×§×©×•×¨×ª</option>
              <option value="×¨×™×¤×•×™ ×‘×¢×™×¡×•×§">×¨×™×¤×•×™ ×‘×¢×™×¡×•×§</option>
              <option value="×¤×™×–×™×•×ª×¨×¤×™×”">×¤×™×–×™×•×ª×¨×¤×™×”</option>
              <option value="×˜×™×¤×•×œ ×¨×’×©×™">×˜×™×¤×•×œ ×¨×’×©×™</option>
            </select>
            
            <div class="sub-container" id="subContainer">
              <div class="sub-title">â­ ×ª×—×•××™ ×¢× ×™×™×Ÿ (××•×¤×¦×™×•× ×œ×™)</div>
              <div class="checkbox-chips" id="subChips"></div>
            </div>
          </div>
          
          <div class="form-group">
            <label>××” ×—×©×•×‘ ×œ×›× ×‘××˜×¤×œ? (××•×¤×¦×™×•× ×œ×™)</label>
            <input type="text" id="difficulty" placeholder='×œ×“×•×’××”: "× ×™×¡×™×•×Ÿ ×¢× ×™×œ×“×™× ×¨×’×™×©×™×"' />
          </div>
        </div>
        
        <!-- ×”×¢×“×¤×•×ª -->
        <div class="section">
          <h3 class="section-title">
            <span>â­</span>
            ×”×¢×“×¤×•×ª
          </h3>
          
          <div class="form-group">
            <label>××” ×—×©×•×‘ ×œ×›×? (×‘×—×¨/×™ ××¡×¤×¨)</label>
            <div class="checkbox-chips">
              <div class="checkbox-chip">
                <input type="checkbox" id="pref1" value="âš¡ ×–××™× ×•×ª ××”×™×¨×”">
                <label for="pref1"><span>âš¡</span> ×–××™× ×•×ª ××”×™×¨×”</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref2" value="ğŸ’» ×˜×™×¤×•×œ ××•× ×œ×™×™×Ÿ">
                <label for="pref2"><span>ğŸ’»</span> ×˜×™×¤×•×œ ××•× ×œ×™×™×Ÿ</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref3" value="ğŸ  ×”×’×¢×” ×œ×‘×™×ª">
                <label for="pref3"><span>ğŸ </span> ×”×’×¢×” ×œ×‘×™×ª</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref4" value="ğŸ“ ×§×œ×™× ×™×§×” × ×’×™×©×”">
                <label for="pref4"><span>ğŸ“</span> ×§×œ×™× ×™×§×” × ×’×™×©×”</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref5" value="ğŸ“ × ×™×¡×™×•×Ÿ ×¢× ×—×™× ×•×š ××™×•×—×“">
                <label for="pref5"><span>ğŸ“</span> × ×™×¡×™×•×Ÿ ×¢× ×—×™× ×•×š ××™×•×—×“</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref6" value="ğŸ’° ××—×™×¨ × ×•×—">
                <label for="pref6"><span>ğŸ’°</span> ××—×™×¨ × ×•×—</label>
              </div>
              <div class="checkbox-chip">
                <input type="checkbox" id="pref7" value="â¤ï¸ ×“×’×© ×¨×’×©×™">
                <label for="pref7"><span>â¤ï¸</span> ×“×’×© ×¨×’×©×™</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>××ª×™ ××ª× ×–××™× ×™×?</label>
            <select id="timing">
              <option value="">×œ× ××©× ×”</option>
              <option value="×‘×”×§×“× ×”××¤×©×¨×™">×‘×”×§×“× ×”××¤×©×¨×™</option>
              <option value="×ª×•×š ×©×‘×•×¢×™×™×">×ª×•×š ×©×‘×•×¢×™×™×</option>
              <option value="×ª×•×š ×—×•×“×©">×ª×•×š ×—×•×“×©</option>
              <option value="×’××™×©">×’××™×©</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>××©×š ××¤×’×© ××•×¢×“×£</label>
            <select id="duration">
              <option value="">×œ× ××©× ×”</option>
              <option value="45 ×“×§×•×ª">45 ×“×§×•×ª</option>
              <option value="60 ×“×§×•×ª">60 ×“×§×•×ª</option>
            </select>
          </div>
        </div>
        
        <!-- ×¤×¨×˜×™ ×§×©×¨ -->
        <div class="section">
          <h3 class="section-title">
            <span>ğŸ“</span>
            ×¤×¨×˜×™ ×§×©×¨
          </h3>
          
          <div class="form-group">
            <label><span class="required">*</span> ×©× ×”×”×•×¨×”</label>
            <input type="text" id="parentName" placeholder="×©× ××œ×" required />
          </div>
          
          <div class="form-group">
            <label><span class="required">*</span> ×˜×œ×¤×•×Ÿ</label>
            <input type="tel" id="phone" placeholder="050-1234567" required />
          </div>
        </div>
        
        <!-- ×‘×™×˜×•×— -->
        <div class="section">
          <h3 class="section-title">
            <span>ğŸ’³</span>
            ×‘×™×˜×•×—
          </h3>
          
          <div class="form-group">
            <label><span class="required">*</span> ×™×© ×œ×›× ×‘×™×˜×•×— ××©×œ×™×?</label>
            <div class="radio-group">
              <div class="radio-option">
                <input type="radio" id="ins1" name="insurance" value="×›×Ÿ" checked>
                <label for="ins1">×›×Ÿ, ×™×© ×œ×™ ×‘×™×˜×•×— ××©×œ×™×</label>
              </div>
              <div class="radio-option">
                <input type="radio" id="ins2" name="insurance" value="×œ×">
                <label for="ins2">×œ×, ××™×Ÿ ×œ×™ ×‘×™×˜×•×— ××©×œ×™×</label>
              </div>
            </div>
            
            <div class="insurance-container" id="insuranceContainer">
              <div class="sub-title">ğŸ’¡ ×¨×•×¦×™× ×”×¦×¢×” ×œ×‘×™×˜×•×—?</div>
              <div class="radio-group">
                <div class="radio-option">
                  <input type="radio" id="offer1" name="wantOffer" value="×›×Ÿ, ××©××— ×œ×”×¦×¢×”" checked>
                  <label for="offer1">×›×Ÿ, ××©××— ×œ×”×¦×¢×”</label>
                </div>
                <div class="radio-option">
                  <input type="radio" id="offer2" name="wantOffer" value="×œ× ×ª×•×“×”">
                  <label for="offer2">×œ× ×ª×•×“×”</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Consent Box -->
        <div class="consent-box">
          <label class="consent-checkbox">
            <input type="checkbox" id="consent" required>
            <div class="consent-text">
              <strong>×× ×™ ×××©×¨/×ª:</strong>
              <ul>
                <li>FlowMatch ×”×™× ×¤×œ×˜×¤×•×¨××ª ×”×ª×××” ×‘×œ×‘×“, ×œ× ×¡×¤×§×™×ª ×©×™×¨×•×ª×™ ×‘×¨×™××•×ª</li>
                <li>×”×¤×¨×˜×™× ×©×œ×™ ×™×•×¢×‘×¨×• ×œ××˜×¤×œ×™× ××ª××™××™× ×‘××–×•×¨×™</li>
                <li>×”××™×“×¢ ×™×™×©××¨ ×‘××¢×¨×›×ª ×œ××©×š 30 ×™×•× ×•××– ×™×™××—×§ ××•×˜×•××˜×™×ª</li>
                <li>×§×¨××ª×™ ××ª <span class="privacy-link" onclick="showPrivacy()">××“×™× ×™×•×ª ×”×¤×¨×˜×™×•×ª</span></li>
              </ul>
            </div>
          </label>
        </div>
        
        <!-- Submit -->
        <button type="submit" class="btn" id="submitBtn">
          <span>ğŸš€</span>
          ×©×œ×—/×™ ×‘×§×©×” ×œ×”×ª×××”
        </button>
        
      </form>
      
      <!-- Loading -->
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>×©×•×œ×— ××ª ×”×¤×¨×˜×™×...</p>
      </div>
      
      <!-- Success -->
      <div class="success" id="success">
        <div class="success-icon">âœ…</div>
        <h2>×ª×•×“×” ×¨×‘×”!</h2>
        <p>×§×™×‘×œ× ×• ××ª ×”×‘×§×©×” ×©×œ×›×.<br>× ×—×–×•×¨ ××œ×™×›× ×‘×”×§×“× ×¢× ×”××˜×¤×œ×™× ×”××ª××™××™× ×‘×™×•×ª×¨!</p>
      </div>
    </div>
  </div>
  
  <!-- Toast -->
  <div class="toast" id="toast">
    <span>âŒ</span>
    <span id="toastMsg"></span>
  </div>
  
  <script>
    // âœ… Google Form Config - VERIFIED from pre-filled link
    const CONFIG = {
      url: 'https://docs.google.com/forms/d/e/1FAIpQLSfSHU7BpvfY0ExW1JSk3QdXmPVof08EoWaGAiKaf2fiZmZ9BQ/formResponse',
      entries: {
        childName: 'entry.1874755091',        // ×©×™ (optional)
        age: 'entry.1479557102',              // 0-3
        region: 'entry.1519777934',           // ××¨×›×–
        language: 'entry.2044023557',         // ×¢×‘×¨×™×ª
        therapy: 'entry.921962628',           // ×¤×™×–×™×•×ª×¨×¤×™×”
        subSpecs: 'entry.792546451',          // ×˜×•× ×•×¡ ×©×¨×™×¨×™× (multi)
        difficulty: 'entry.267290518',        // ×©×™
        preferences: 'entry.1975016513',      // ğŸ  ×”×’×¢×” ×œ×‘×™×ª (multi)
        timing: 'entry.1909228234',           // ×©×™
        duration: 'entry.1540815796',         // 60 ×“×§×•×ª
        parentName: 'entry.501366501',        // ×©×™
        phone: 'entry.2054465157',            // ×©×™
        hasInsurance: 'entry.1018715973',     // ×œ×
        wantOffer: 'entry.2043347683'         // ×›×Ÿ, ××©××— ×œ×”×¦×¢×”
      }
    };
    
    const SUBSPECS = {
      '×§×œ×™× ××•×ª ×ª×§×©×•×¨×ª': ['×”×¤×¨×¢×•×ª ×”×™×’×•×™', '×§×©×™×™ ×©×¤×”', '×’××’×•×', '×¢×™×›×•×‘ ×©×¤×ª×™'],
      '×¨×™×¤×•×™ ×‘×¢×™×¡×•×§': ['×•×™×¡×•×ª ×—×•×©×™', '××•×˜×•×¨×™×§×” ×¢×“×™× ×”', '××•×˜×•×¨×™×§×” ×’×¡×”', '×§×©×‘ ×•×¨×™×›×•×–'],
      '×¤×™×–×™×•×ª×¨×¤×™×”': ['×©×™×•×•×™ ××©×§×œ', '×›×•×— ×©×¨×™×¨×™×', '×’××™×©×•×ª', '×˜×•× ×•×¡ ×©×¨×™×¨×™× (×”×™×¤×•/×”×™×¤×¨)'],
      '×˜×™×¤×•×œ ×¨×’×©×™': ['×—×¨×“×•×ª', '×§×©×™×™ ×”×¡×ª×’×œ×•×ª', '×•×™×¡×•×ª ×¨×’×©×™', '×”×ª× ×”×’×•×ª']
    };
    
    let selectedSubSpecs = [];
    
    // Progress
    function updateProgress() {
      const req = document.querySelectorAll('[required]');
      let filled = 0;
      req.forEach(el => {
        if (el.type === 'checkbox' || el.type === 'radio') {
          const name = el.name || el.id;
          if (document.querySelector(`[name="${name}"]:checked`) || el.checked) filled++;
        } else if (el.value && el.value.trim()) {
          filled++;
        }
      });
      const pct = Math.round((filled / req.length) * 100);
      document.getElementById('progress').style.width = pct + '%';
      document.getElementById('pct').textContent = pct + '%';
    }
    
    // Toast
    function showToast(msg) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMsg').textContent = msg;
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
    
    // Privacy
    function showPrivacy() {
      alert(`××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª - FlowMatch

××” ×× ×—× ×• ××•×¡×¤×™×?
â€¢ ×©× ×•××¡×¤×¨ ×˜×œ×¤×•×Ÿ (×œ×™×¦×™×¨×ª ×§×©×¨)
â€¢ ××–×•×¨ ××’×•×¨×™× (×œ××¦×™××ª ××˜×¤×œ×™× ×‘××–×•×¨)
â€¢ ×”×¢×“×¤×•×ª ×›×œ×œ×™×•×ª (×¡×•×’ ××§×¦×•×¢, ×–××™× ×•×ª)

××” ×× ×—× ×• ×œ× ××•×¡×¤×™×?
â€¢ ×ª×™×§ ×¨×¤×•××™ ××• ×¨×©×•××•×ª ×¨×¤×•××™×•×ª
â€¢ ××‘×—× ×•×ª ×¨×¤×•××™×•×ª ××¤×•×¨×˜×•×ª
â€¢ ××™×“×¢ ×¨×’×™×© ××¢×‘×¨ ×œ××™× ×™××•× ×”× ×“×¨×©

××” ×× ×—× ×• ×¢×•×©×™× ×¢× ×”××™×“×¢?
â€¢ ××¢×‘×™×¨×™× ××•×ª×• ×œ××˜×¤×œ×™× ××ª××™××™× ×‘××–×•×¨×›×
â€¢ ××•×—×§×™× ××•×˜×•××˜×™×ª ××—×¨×™ 30 ×™×•×

×”×× ×× ×—× ×• ×©×•××¨×™× ××™×“×¢ ×¨×¤×•××™?
×œ×. FlowMatch ×”×™× ×¤×œ×˜×¤×•×¨××ª ×”×ª×××” ×‘×œ×‘×“, ×œ× ×¡×¤×§×™×ª ×©×™×¨×•×ª×™ ×‘×¨×™××•×ª.

××™×š ×œ××—×•×§ ××ª ×”××™×“×¢ ×©×œ×š?
×©×œ×— ××™×™×œ ×œ-carematching.lab.il@gmail.com

×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: ×“×¦××‘×¨ 2025`);
    }
    
    // Dynamic subspecs
    document.getElementById('therapy').addEventListener('change', function() {
      const container = document.getElementById('subContainer');
      const chips = document.getElementById('subChips');
      selectedSubSpecs = [];
      chips.innerHTML = '';
      
      if (this.value && SUBSPECS[this.value]) {
        container.classList.add('show');
        SUBSPECS[this.value].forEach((spec, i) => {
          const id = 'sub' + i;
          const div = document.createElement('div');
          div.className = 'checkbox-chip';
          div.innerHTML = `
            <input type="checkbox" id="${id}" value="${spec}">
            <label for="${id}">${spec}</label>
          `;
          div.querySelector('input').addEventListener('change', function() {
            if (this.checked) {
              selectedSubSpecs.push(spec);
            } else {
              selectedSubSpecs = selectedSubSpecs.filter(s => s !== spec);
            }
          });
          chips.appendChild(div);
        });
      } else {
        container.classList.remove('show');
      }
    });
    
    // Insurance logic
    document.querySelectorAll('[name="insurance"]').forEach(radio => {
      radio.addEventListener('change', function() {
        const container = document.getElementById('insuranceContainer');
        if (this.value === '×œ×') {
          container.classList.add('show');
        } else {
          container.classList.remove('show');
        }
      });
    });
    
    // Form submit
    document.getElementById('form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Validate consent
      if (!document.getElementById('consent').checked) {
        showToast('×× × ××©×¨/×™ ××ª ×ª× ××™ ×”×©×™××•×©');
        return;
      }
      
      // Show loading
      document.querySelector('form').style.display = 'none';
      document.getElementById('loading').classList.add('show');
      
      // Prepare data
      const formData = new FormData();
      formData.append(CONFIG.entries.childName, document.getElementById('childName').value);
      formData.append(CONFIG.entries.age, document.getElementById('age').value);
      formData.append(CONFIG.entries.region, document.getElementById('region').value);
      formData.append(CONFIG.entries.language, document.getElementById('language').value);
      formData.append(CONFIG.entries.therapy, document.getElementById('therapy').value);
      
      // Sub-specializations (multi-select)
      selectedSubSpecs.forEach(spec => {
        formData.append(CONFIG.entries.subSpecs, spec);
      });
      
      formData.append(CONFIG.entries.difficulty, document.getElementById('difficulty').value);
      
      // Preferences (multi-select)
      document.querySelectorAll('[id^="pref"]:checked').forEach(cb => {
        formData.append(CONFIG.entries.preferences, cb.value);
      });
      
      formData.append(CONFIG.entries.timing, document.getElementById('timing').value);
      formData.append(CONFIG.entries.duration, document.getElementById('duration').value);
      formData.append(CONFIG.entries.parentName, document.getElementById('parentName').value);
      formData.append(CONFIG.entries.phone, document.getElementById('phone').value);
      formData.append(CONFIG.entries.hasInsurance, document.querySelector('[name="insurance"]:checked').value);
      formData.append(CONFIG.entries.wantOffer, document.querySelector('[name="wantOffer"]:checked').value);
      
      try {
        // Create iframe for submission
        const iframe = document.createElement('iframe');
        iframe.name = 'hidden_iframe';
        iframe.style.display = 'none';
        document.body.appendChild(iframe);
        
        // Create form element
        const actualForm = document.createElement('form');
        actualForm.action = CONFIG.url;
        actualForm.method = 'POST';
        actualForm.target = 'hidden_iframe';
        
        // Add all data
        for (let [key, value] of formData.entries()) {
          const input = document.createElement('input');
          input.type = 'hidden';
          input.name = key;
          input.value = value;
          actualForm.appendChild(input);
        }
        
        // Submit
        document.body.appendChild(actualForm);
        actualForm.submit();
        
        // Show success
        setTimeout(() => {
          document.getElementById('loading').classList.remove('show');
          document.getElementById('success').classList.add('show');
          document.body.removeChild(actualForm);
          document.body.removeChild(iframe);
        }, 2000);
        
      } catch (err) {
        console.error(err);
        showToast('×©×’×™××” ×‘×©×œ×™×—×”. × ×¡×”/×™ ×©×•×‘');
        document.getElementById('loading').classList.remove('show');
        document.querySelector('form').style.display = 'block';
      }
    });
    
    // Track progress
    document.querySelectorAll('input, select').forEach(el => {
      el.addEventListener('input', updateProgress);
      el.addEventListener('change', updateProgress);
    });
    
    // Animate sections
    window.addEventListener('load', () => {
      document.querySelectorAll('.section').forEach((sec, i) => {
        setTimeout(() => sec.classList.add('visible'), i * 150);
      });
    });
    
    updateProgress();
  </script>
</body>
</html>
